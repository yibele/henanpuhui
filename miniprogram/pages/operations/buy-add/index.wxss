/**
 * 收购登记页面样式
 * 大师级 UI 设计 - Glassmorphism + Modern Cards
 */

/* ====== 页面容器 ====== */
.page-container {
  min-height: 100vh;
  background: linear-gradient(180deg, #fff7ed 0%, #f8fafc 15%, #f8fafc 100%);
  padding-bottom: 200rpx;
}

/* ====== 顶部背景装饰 ====== */
.header-bg {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 280rpx;
  background: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
  border-radius: 0 0 48rpx 48rpx;
}

/* ====== 页面标题 ====== */
.page-header {
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 32rpx 32rpx 48rpx;
  z-index: 1;
}

.header-info {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.page-title {
  font-size: 44rpx;
  font-weight: 700;
  color: #ffffff;
}

.page-subtitle {
  font-size: 26rpx;
  color: rgba(255, 255, 255, 0.85);
}

.header-date {
  display: flex;
  align-items: center;
  gap: 8rpx;
  padding: 16rpx 24rpx;
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(10px);
  border-radius: 32rpx;
  color: #ffffff;
  font-size: 26rpx;
}

/* ====== 通用卡片 ====== */
.card {
  position: relative;
  margin: 0 24rpx 24rpx;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 24rpx;
  padding: 28rpx;
  box-shadow: 0 4rpx 24rpx rgba(0, 0, 0, 0.06);
}

.card-header {
  display: flex;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 24rpx;
}

.card-indicator {
  width: 6rpx;
  height: 32rpx;
  border-radius: 3rpx;
}

.card-indicator.blue {
  background: linear-gradient(180deg, #3b82f6, #2563eb);
}

.card-indicator.green {
  background: linear-gradient(180deg, #10b981, #059669);
}

.card-indicator.purple {
  background: linear-gradient(180deg, #8b5cf6, #7c3aed);
}

.card-title {
  font-size: 30rpx;
  font-weight: 600;
  color: #374151;
}

/* ====== 农户选择卡片 ====== */
.farmer-card {
  margin-top: -24rpx;
  z-index: 2;
}

.farmer-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40rpx 0;
}

.empty-icon {
  width: 100rpx;
  height: 100rpx;
  border-radius: 50%;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 16rpx;
}

.empty-text {
  font-size: 30rpx;
  font-weight: 500;
  color: #374151;
  margin-bottom: 8rpx;
}

.empty-hint {
  font-size: 24rpx;
  color: #9ca3af;
}

.farmer-selected {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.farmer-main {
  display: flex;
  align-items: center;
  gap: 20rpx;
}

.farmer-avatar {
  width: 88rpx;
  height: 88rpx;
  border-radius: 50%;
  background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.farmer-avatar text {
  font-size: 36rpx;
  font-weight: 700;
  color: #c2410c;
}

.farmer-info {
  flex: 1;
  min-width: 0;
}

.farmer-name-row {
  display: flex;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 6rpx;
}

.farmer-name {
  font-size: 32rpx;
  font-weight: 600;
  color: #111827;
}

.grade-tag {
  padding: 4rpx 12rpx;
  border-radius: 6rpx;
  font-size: 20rpx;
  font-weight: 600;
}

.grade-tag.grade-A, .grade-tag.grade-gold {
  background: #fef3c7;
  color: #b45309;
}

.grade-tag.grade-B, .grade-tag.grade-silver {
  background: #e5e7eb;
  color: #4b5563;
}

.grade-tag.grade-C, .grade-tag.grade-bronze {
  background: #fed7aa;
  color: #9a3412;
}

.farmer-meta {
  display: block;
  font-size: 26rpx;
  color: #6b7280;
  margin-bottom: 4rpx;
}

.farmer-address {
  display: block;
  font-size: 24rpx;
  color: #9ca3af;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.farmer-history {
  display: flex;
  align-items: center;
  padding: 20rpx;
  background: #fffbeb;
  border-radius: 16rpx;
  border: 1rpx solid #fde68a;
}

.history-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rpx;
}

.history-divider {
  width: 1rpx;
  height: 48rpx;
  background: #fcd34d;
}

.history-value {
  font-size: 32rpx;
  font-weight: 700;
  color: #92400e;
}

.history-value.highlight {
  color: #059669;
}

.history-label {
  font-size: 22rpx;
  color: #a16207;
}

/* ====== 输入网格 ====== */
.input-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20rpx;
}

.input-item {
  display: flex;
  flex-direction: column;
  gap: 12rpx;
}

.input-label {
  font-size: 24rpx;
  color: #6b7280;
  font-weight: 500;
}

.input-box {
  display: flex;
  align-items: center;
  height: 88rpx;
  padding: 0 20rpx;
  background: #f9fafb;
  border: 2rpx solid #e5e7eb;
  border-radius: 16rpx;
  transition: all 0.2s;
}

.input-box:focus-within {
  border-color: #f97316;
  background: #ffffff;
  box-shadow: 0 0 0 4rpx rgba(249, 115, 22, 0.1);
}

.input-field {
  flex: 1;
  font-size: 32rpx;
  font-weight: 600;
  color: #111827;
  text-align: center;
}

.input-unit {
  font-size: 24rpx;
  color: #9ca3af;
  flex-shrink: 0;
  margin-left: 8rpx;
}

/* ====== 计算结果卡片 ====== */
.result-card {
  background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
  border: 2rpx solid #bbf7d0;
}

.result-list {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.result-row-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20rpx 0;
  border-bottom: 1rpx solid #d1fae5;
}

.result-row-item:last-child {
  border-bottom: none;
}

.result-row-item.highlight-row {
  background: rgba(37, 99, 235, 0.08);
  margin: 0 -28rpx;
  padding: 20rpx 28rpx;
  border-radius: 12rpx;
  border-bottom: none;
}

.result-item-label {
  font-size: 28rpx;
  color: #6b7280;
}

.result-item-value-wrap {
  display: flex;
  align-items: baseline;
  gap: 6rpx;
}

.result-item-value {
  font-size: 36rpx;
  font-weight: 700;
  color: #374151;
}

.result-item-value.highlight-blue {
  font-size: 40rpx;
  color: #2563eb;
}

.result-item-value.highlight-green {
  font-size: 36rpx;
  color: #059669;
}

.result-item-unit {
  font-size: 24rpx;
  color: #6b7280;
}

.formula {
  margin-top: 20rpx;
  padding-top: 16rpx;
  border-top: 1rpx dashed #86efac;
  text-align: center;
}

.formula text {
  font-size: 24rpx;
  color: #6b7280;
}

/* ====== 农户概况卡片 ====== */
.overview-card {
  background: linear-gradient(135deg, #faf5ff 0%, #f5f3ff 100%);
  border: 2rpx solid #e9d5ff;
}

.overview-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16rpx;
  margin-bottom: 20rpx;
}

.overview-item {
  display: flex;
  flex-direction: column;
  gap: 6rpx;
  padding: 16rpx;
  background: rgba(255, 255, 255, 0.7);
  border-radius: 12rpx;
}

.overview-label {
  font-size: 22rpx;
  color: #9ca3af;
}

.overview-value {
  font-size: 28rpx;
  font-weight: 600;
  color: #374151;
}

.overview-value.highlight-purple {
  color: #8b5cf6;
}

/* ====== 预估收购区域 ====== */
.estimate-section {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 12rpx;
  padding: 12rpx 16rpx;
}

.estimate-row-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10rpx 0;
  border-bottom: 1rpx solid #f3e8ff;
}

.estimate-row-item:last-child {
  border-bottom: none;
}

.estimate-row-item.highlight {
  margin: 8rpx -16rpx 0;
  padding: 12rpx 16rpx;
  background: rgba(139, 92, 246, 0.1);
  border-radius: 8rpx;
  border-bottom: none;
}

.estimate-label {
  font-size: 24rpx;
  color: #6b7280;
}

.estimate-value {
  font-size: 28rpx;
  font-weight: 600;
  color: #374151;
}

.estimate-row-item.highlight .estimate-value {
  color: #8b5cf6;
}

.estimate-value.warning {
  color: #ef4444;
}

/* ====== 备注区域 ====== */
.card .t-textarea {
  --td-textarea-background-color: #f9fafb;
  --td-textarea-border-radius: 16rpx;
  --td-textarea-padding: 20rpx;
}

/* ====== 底部安全区 ====== */
.safe-bottom {
  height: 60rpx;
}

/* ====== 底部操作栏 ====== */
.bottom-bar {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: #ffffff;
  padding: 16rpx 24rpx;
  padding-bottom: calc(16rpx + env(safe-area-inset-bottom));
  box-shadow: 0 -4rpx 24rpx rgba(0, 0, 0, 0.08);
  z-index: 100;
}

.bottom-summary {
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 12rpx 16rpx;
  margin-bottom: 12rpx;
  background: #f0fdf4;
  border-radius: 12rpx;
}

.summary-row {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rpx;
}

.summary-label {
  font-size: 22rpx;
  color: #6b7280;
}

.summary-value {
  font-size: 28rpx;
  font-weight: 600;
  color: #374151;
}

.summary-value.highlight {
  color: #059669;
}

.bottom-actions {
  display: flex;
  gap: 20rpx;
}

.btn-cancel {
  flex: 1;
  height: 88rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30rpx;
  font-weight: 500;
  color: #6b7280;
  background: #f3f4f6;
  border-radius: 44rpx;
}

.btn-submit {
  flex: 2;
  height: 88rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32rpx;
  font-weight: 600;
  color: #ffffff;
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  border-radius: 44rpx;
  box-shadow: 0 8rpx 24rpx rgba(249, 115, 22, 0.35);
}

.btn-submit.disabled {
  background: #d1d5db;
  box-shadow: none;
}

.btn-submit:active:not(.disabled) {
  transform: scale(0.98);
}

/* ====== 弹窗样式 ====== */
.popup-wrap {
  background: #ffffff;
  border-radius: 32rpx 32rpx 0 0;
  min-height: 50vh;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}

.popup-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 28rpx 32rpx;
  border-bottom: 1rpx solid #f3f4f6;
}

.popup-title {
  font-size: 34rpx;
  font-weight: 600;
  color: #111827;
}

.popup-close {
  width: 64rpx;
  height: 64rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border-radius: 50%;
}

/* ====== 搜索区 ====== */
.search-section {
  padding: 24rpx 32rpx;
}

.search-input-row {
  display: flex;
  gap: 16rpx;
}

.search-input-wrap {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 12rpx;
  height: 88rpx;
  padding: 0 20rpx;
  background: #f3f4f6;
  border-radius: 44rpx;
}

.search-input {
  flex: 1;
  font-size: 30rpx;
  color: #111827;
}

.search-clear {
  padding: 8rpx;
}

.search-btn {
  width: 140rpx;
  height: 88rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  font-weight: 500;
  color: #ffffff;
  background: #d1d5db;
  border-radius: 44rpx;
  transition: all 0.2s;
}

.search-btn.active {
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
}

/* ====== 搜索结果 ====== */
.search-result {
  padding: 24rpx 32rpx;
}

.search-result .result-card {
  display: flex;
  align-items: center;
  gap: 20rpx;
  padding: 24rpx;
  background: #f0fdf4;
  border: 2rpx solid #86efac;
  border-radius: 20rpx;
}

.result-avatar {
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
  background: linear-gradient(135deg, #bbf7d0 0%, #86efac 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.result-avatar text {
  font-size: 32rpx;
  font-weight: 700;
  color: #15803d;
}

.result-info {
  flex: 1;
  min-width: 0;
}

.result-name-row {
  display: flex;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 6rpx;
}

.result-name {
  font-size: 32rpx;
  font-weight: 600;
  color: #111827;
}

.result-phone {
  display: block;
  font-size: 28rpx;
  color: #059669;
  font-weight: 500;
  margin-bottom: 4rpx;
}

.result-meta {
  display: block;
  font-size: 24rpx;
  color: #6b7280;
}

.result-select {
  width: 64rpx;
  height: 64rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #dcfce7;
  border-radius: 50%;
}

/* ====== 空状态 & 提示 ====== */
.search-empty,
.search-hint-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16rpx;
  padding: 80rpx 32rpx;
  color: #9ca3af;
  font-size: 28rpx;
}