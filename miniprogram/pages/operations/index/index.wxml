<!--
  发苗管理页面（助理）
  显示种苗发放记录列表
-->
<view class="seed-page">
  <!-- 页面头部 -->
  <view class="page-header">
    <view class="header-content">
      <text class="header-title">发苗管理</text>
      <text class="header-subtitle">种苗发放记录</text>
    </view>
    <view class="header-stats">
      <view class="stat-item">
        <text class="stat-value">{{stats.totalCount}}</text>
        <text class="stat-label">发放次数</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{stats.totalQuantity}}</text>
        <text class="stat-label">总发放量</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value highlight">{{stats.totalAmount}}</text>
        <text class="stat-label">总金额</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{stats.farmerCount}}</text>
        <text class="stat-label">农户数</text>
      </view>
    </view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <t-loading theme="circular" size="40rpx" />
    <text>加载中...</text>
  </view>

  <!-- 发放记录列表 -->
  <view wx:else class="record-section">
    <view class="section-header">
      <text class="section-title">发放记录</text>
      <text class="section-count">共 {{seedRecords.length}} 条</text>
    </view>

    <view wx:if="{{seedRecords.length > 0}}" class="record-list">
      <view wx:for="{{seedRecords}}" wx:key="id" class="record-card" bindtap="onRecordTap" data-record="{{item}}">
        <view class="record-left">
          <view class="record-avatar">
            <text>{{item.farmerName[0]}}</text>
          </view>
          <view class="record-info">
            <text class="record-name">{{item.farmerName}}</text>
            <text class="record-detail">{{item.quantity}}株 · {{item.distributedArea}}亩</text>
            <text class="record-date">{{item.date}} · {{item.receiverName || '—'}}</text>
          </view>
        </view>
        <view class="record-right">
          <text class="record-amount">¥{{item.amount}}</text>
          <text class="record-manager">{{item.managerName}}</text>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view wx:else class="empty-state">
      <view class="empty-icon">
        <t-icon name="folder-open" size="80rpx" color="#d1d5db" />
      </view>
      <text class="empty-text">暂无发放记录</text>
      <text class="empty-hint">点击下方按钮添加发苗记录</text>
    </view>
  </view>

  <!-- 底部添加按钮 -->
  <view class="add-btn-fixed" bindtap="onAddSeed">
    <t-icon name="add" size="44rpx" color="#ffffff" />
    <text>发苗登记</text>
  </view>

  <!-- 底部安全区 -->
  <view class="safe-bottom"></view>
</view>
