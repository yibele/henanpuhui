<!--
  农户列表页面
  展示签约农户列表
  设计原则：关键信息（亩数、定金）放在显眼位置
-->
<view class="farmer-list-page">
  <!-- 顶部统计卡片 -->
  <view class="stats-card">
    <view class="stats-header">
      <text class="stats-title">我的签约农户</text>
    </view>
    <view class="stats-grid">
      <view class="stats-item">
        <text class="stats-value">{{stats.totalFarmers}}</text>
        <text class="stats-label">签约农户(户)</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-value">{{stats.totalAcreage}}</text>
        <text class="stats-label">总面积(亩)</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-value stats-value-orange">{{stats.totalDeposit}}</text>
        <text class="stats-label">总定金(元)</text>
      </view>
    </view>
  </view>

  <!-- 搜索区域 -->
  <view class="search-area">
    <view class="search-row">
      <view class="search-wrapper">
        <t-search
          value="{{searchValue}}"
          placeholder="搜姓名/手机号/客户编码"
          shape="round"
          bind:change="onSearchChange"
          bind:clear="onSearchClear"
        />
      </view>
      <view class="add-btn" bindtap="onAddFarmer">
        <t-icon name="add" size="48rpx" color="#ffffff" />
      </view>
    </view>
  </view>

  <!-- 农户列表 -->
  <view class="farmer-list">
    <block wx:if="{{filteredFarmers.length > 0}}">
      <view 
        wx:for="{{filteredFarmers}}" 
        wx:key="id"
        class="farmer-card"
        data-id="{{item.id}}"
        bindtap="onFarmerTap"
      >
        <!-- 左侧等级色条 -->
        <view class="grade-bar grade-bar-{{item.grade}}"></view>
        
        <view class="farmer-card-content">
          <!-- 第一行：姓名 | 等级 | 电话 -->
          <view class="farmer-row-1">
            <view class="farmer-name-area">
              <text class="farmer-name">{{item.name}}</text>
              <text class="grade-line">|</text>
              <text class="grade-text grade-text-{{item.grade}}">{{item.gradeText}}</text>
            </view>
            <text class="farmer-phone">{{item.phone}}</text>
          </view>
          
          <!-- 第二行：核心数据 - 亩数 + 定金（突出显示） -->
          <view class="farmer-row-2">
            <view class="core-data">
              <view class="data-item">
                <text class="data-value">{{item.acreage}}</text>
                <text class="data-unit">亩</text>
              </view>
              <view class="data-divider"></view>
              <view class="data-item">
                <text class="data-label">定金</text>
                <text class="data-value data-value-orange">¥{{item.deposit || 0}}</text>
              </view>
            </view>
            <t-icon name="chevron-right" size="36rpx" color="#d1d5db" />
          </view>
          
          <!-- 第三行：次要信息 - 客户编码 + 地址 + 签约日期 -->
          <view class="farmer-row-3">
            <text class="sub-info code">{{item.customerCode}}</text>
            <text class="sub-info">{{item.addressText || item.address.village}}</text>
            <text class="sub-info">签约 {{item.contractDate}}</text>
          </view>
        </view>
      </view>
    </block>

    <!-- 空状态 -->
    <view wx:else class="empty-state">
      <t-empty 
        icon="folder-open" 
        description="没有找到相关农户"
      />
    </view>
  </view>

  <!-- 底部间距 -->
  <view class="bottom-space"></view>
</view>
