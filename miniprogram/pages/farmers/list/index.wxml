<!--
  å†œæˆ·åˆ—è¡¨é¡µé¢
  å±•ç¤ºç­¾çº¦å†œæˆ·åˆ—è¡¨
-->
<view class="farmer-list-page">
  <!-- é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stats-header">
      <text class="stats-title">æˆ‘çš„ç­¾çº¦å†œæˆ·</text>
    </view>
    <view class="stats-grid">
      <view class="stats-item">
        <text class="stats-value">{{stats.totalFarmers}}</text>
        <text class="stats-label">ç­¾çº¦å†œæˆ·(æˆ·)</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-value">{{stats.totalAcreage}}</text>
        <text class="stats-label">æ€»é¢ç§¯(äº©)</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-value stats-value-orange">{{stats.totalDeposit}}</text>
        <text class="stats-label">æ€»å®šé‡‘(å…ƒ)</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢åŒºåŸŸ -->
  <view class="search-area">
    <view class="search-row">
      <view class="search-wrapper">
        <t-search
          value="{{searchValue}}"
          placeholder="æœå§“å/æ‰‹æœºå·/å®¢æˆ·ç¼–ç "
          shape="round"
          bind:change="onSearchChange"
          bind:clear="onSearchClear"
        />
      </view>
      <view class="add-btn" bindtap="onAddFarmer">
        <t-icon name="add" size="48rpx" color="#ffffff" />
      </view>
    </view>
  </view>

  <!-- å†œæˆ·åˆ—è¡¨ -->
  <view class="farmer-list">
    <block wx:if="{{filteredFarmers.length > 0}}">
      <view 
        wx:for="{{filteredFarmers}}" 
        wx:key="id"
        class="farmer-card"
        data-id="{{item.id}}"
        bindtap="onFarmerTap"
      >
        <view class="farmer-card-content">
          <!-- å¤´åƒå’ŒåŸºæœ¬ä¿¡æ¯ -->
          <view class="farmer-info">
            <view class="farmer-avatar farmer-avatar-{{item.grade}}">
              <!-- æ ¹æ®ç­‰çº§æ˜¾ç¤ºä¸åŒå›¾æ ‡ -->
              <text wx:if="{{item.grade === 'gold'}}" class="grade-emoji">ğŸ¥‡</text>
              <text wx:elif="{{item.grade === 'silver'}}" class="grade-emoji">ğŸ¥ˆ</text>
              <text wx:else class="grade-emoji">ğŸ¥‰</text>
            </view>
            <view class="farmer-details">
              <view class="farmer-header">
                <text class="farmer-name">{{item.name}}</text>
                <view class="grade-tag grade-tag-{{item.grade}}">
                  <text wx:if="{{item.grade === 'gold'}}">é‡‘ç‰Œ</text>
                  <text wx:elif="{{item.grade === 'silver'}}">é“¶ç‰Œ</text>
                  <text wx:else>é“œç‰Œ</text>
                </view>
              </view>
              <!-- å®¢æˆ·ç¼–ç  -->
              <view class="customer-code">
                <text>{{item.customerCode}}</text>
              </view>
              <view class="farmer-meta">
                <view class="meta-item">
                  <t-icon name="call" size="28rpx" color="#9ca3af" />
                  <text>{{item.phone}}</text>
                </view>
                <view class="meta-item">
                  <t-icon name="location" size="28rpx" color="#9ca3af" />
                  <text class="truncate">{{item.addressText || item.address.village}}</text>
                </view>
              </view>
            </view>
          </view>
          
          <!-- åº•éƒ¨ä¿¡æ¯ -->
          <view class="farmer-footer">
            <view class="footer-left">
              <text class="contract-date">ç­¾çº¦: {{item.contractDate}}</text>
            </view>
            <view class="footer-right">
              <view class="info-chip info-chip-blue">
                <text>{{item.acreage}} äº©</text>
              </view>
              <view class="info-chip info-chip-orange" wx:if="{{item.deposit > 0}}">
                <text>Â¥{{item.deposit}}</text>
              </view>
              <t-icon name="chevron-right" size="32rpx" color="#059669" />
            </view>
          </view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-state">
      <t-empty 
        icon="folder-open" 
        description="æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å†œæˆ·"
      />
    </view>
  </view>

  <!-- åº•éƒ¨é—´è· -->
  <view class="bottom-space"></view>
</view>
