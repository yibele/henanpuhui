<!--
  农户列表页面
  展示签约农户列表
  设计原则：简洁清晰，符合常规列表阅读习惯
-->
<view class="farmer-list-page">
  <!-- 顶部统计卡片 -->
  <view class="stats-card">
    <view class="stats-header">
      <text class="stats-title">我的签约农户</text>
    </view>
    <view class="stats-grid">
      <view class="stats-item">
        <text class="stats-value">{{stats.totalFarmers}}</text>
        <text class="stats-label">总户数</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-value">{{stats.totalAcreage}}</text>
        <text class="stats-label">总面积(亩)</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-value stats-value-orange">{{stats.totalDeposit}}</text>
        <text class="stats-label">总定金(元)</text>
      </view>
    </view>
  </view>

  <!-- 搜索区域 -->
  <view class="search-area">
    <view class="search-row">
      <view class="search-box">
        <t-icon name="search" size="36rpx" color="#9ca3af" />
        <input 
          class="search-input"
          value="{{searchValue}}"
          placeholder="搜索姓名、电话、编码"
          placeholder-class="search-placeholder"
          bindinput="onSearchChange"
        />
        <t-icon wx:if="{{searchValue}}" name="close-circle-filled" size="36rpx" color="#d1d5db" bindtap="onSearchClear" />
      </view>
      <view class="add-btn" bindtap="onAddFarmer">
        <t-icon name="add" size="48rpx" color="#059669" />
      </view>
    </view>
  </view>

  <!-- 农户列表 -->
  <view class="farmer-list">
    <block wx:if="{{filteredFarmers.length > 0}}">
      <view 
        wx:for="{{filteredFarmers}}" 
        wx:key="id"
        class="farmer-card"
        data-id="{{item.id}}"
        bindtap="onFarmerTap"
      >
        <!-- 左侧竖线标识等级 -->
        <view class="grade-line-mark grade-mark-{{item.grade}}"></view>
        
        <view class="farmer-card-body">
          <!-- 主要信息：姓名 + 面积/苗数 -->
          <view class="card-main">
            <view class="farmer-left">
              <view class="name-row">
                <text class="farmer-name">{{item.name}}</text>
                <text class="grade-tag grade-tag-{{item.grade}}">{{item.gradeText}}</text>
              </view>
            </view>
            <view class="farmer-right">
              <text class="acreage-value">{{item.acreage}}</text>
              <text class="acreage-unit">亩</text>
            </view>
          </view>
          
          <!-- 次要信息：电话 + 定金 -->
          <view class="card-sub">
            <text class="farmer-phone">{{item.phone}}</text>
            <text class="farmer-deposit">定金 ¥{{item.deposit || 0}}</text>
          </view>
        </view>
      </view>
    </block>

    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading-state">
      <t-loading theme="circular" size="40rpx" />
      <text>加载中...</text>
    </view>

    <!-- 空状态 -->
    <view wx:elif="{{filteredFarmers.length === 0}}" class="empty-state">
      <t-empty 
        icon="folder-open" 
        description="暂无农户数据"
      />
    </view>
  </view>

  <!-- 底部间距 -->
  <view class="bottom-space"></view>
</view>
