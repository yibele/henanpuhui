<!--
  仓库收购明细页面
  显示单个仓库的收购记录（只读）
-->
<view class="page-container">
  <!-- 仓库标题 -->
  <view class="page-header">
    <text class="page-title">{{warehouseName}}</text>
    <text class="page-subtitle">更新于 {{updateTime}}</text>
  </view>

  <!-- Tab切换 -->
  <view class="tab-bar">
    <view class="tab-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-tab="0">
      <text>今日记录</text>
    </view>
    <view class="tab-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-tab="1">
      <text>全部记录</text>
    </view>
  </view>

  <!-- 汇总信息 -->
  <view class="summary-bar">
    <view class="summary-item">
      <text class="summary-num">{{summary.count}}</text>
      <text class="summary-label">笔</text>
    </view>
    <view class="summary-item">
      <text class="summary-num highlight">{{summary.totalWeight}}</text>
      <text class="summary-label">kg</text>
    </view>
    <view class="summary-item">
      <text class="summary-num">¥{{summary.totalAmount}}</text>
      <text class="summary-label">元</text>
    </view>
  </view>

  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-input-wrap">
      <t-icon name="search" size="36rpx" color="#9ca3af" />
      <input 
        class="search-input" 
        placeholder="搜索农户姓名或手机号" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
      />
      <view class="search-clear" wx:if="{{searchKeyword}}" bindtap="clearSearch">
        <t-icon name="close-circle-filled" size="32rpx" color="#d1d5db" />
      </view>
    </view>
    <view class="search-btn" bindtap="onSearch">
      <text>搜索</text>
    </view>
  </view>

  <!-- 记录列表 -->
  <view class="record-list">
    <view class="record-item" wx:for="{{list}}" wx:key="acquisitionId">
      <view class="record-header">
        <text class="farmer-name">{{item.farmerName}}</text>
        <text class="record-date">{{item.acquisitionDate}}</text>
      </view>
      <view class="record-body">
        <view class="record-detail weight">
          <text class="detail-label">净重</text>
          <text class="detail-value">{{item.netWeight || item.weight}}kg</text>
        </view>
        <view class="record-detail price">
          <text class="detail-label">单价</text>
          <text class="detail-value">{{item.unitPrice}}元</text>
        </view>
        <view class="record-detail amount">
          <text class="detail-label">金额</text>
          <text class="detail-value highlight">¥{{item.totalAmount}}</text>
        </view>
      </view>
      <view class="record-footer">
        <text class="farmer-phone">{{item.farmerPhone}}</text>
        <text class="record-operator">{{item.createBy}}</text>
      </view>
    </view>

    <!-- 加载更多 -->
    <view class="load-more" wx:if="{{hasMore}}" bindtap="loadMore">
      <text>{{loading ? '加载中...' : '加载更多'}}</text>
    </view>

    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{list.length === 0 && !loading}}">
      <t-icon name="info-circle" size="80rpx" color="#d1d5db" />
      <text class="empty-text">暂无收购记录</text>
    </view>
  </view>
</view>
